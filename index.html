<html>
<head>
<script src="https://unpkg.com/konva@2.4.2/konva.min.js"></script>
<style>
<style>
* {
	margin: 0;
	padding: 0;
}
body {
	margin: 0;
	overflow: hidden;
}
</style>
</head>
<body>
<script>

var back_color = 'white'

var beat_period = 300
var beat_count = 16

var radius = 400


var stage = new Konva.Stage({ container: document.body, width: 1000, height: 1000 })
var layer = new Konva.Layer()

layer.add(new Konva.Circle({
	x: 500, y: 500,
	radius: radius,
	stroke: 'orangered', strokeWidth: 1 }))

var dots = []


for (var i = 0; i < beat_count; i++) {

	var angle = Math.PI * 2 * i / beat_count
	var dot = new Konva.Circle({
	    x: 500 + radius * Math.sin(angle), y: 500 - radius * Math.cos(angle),
		radius: 10, fill: back_color,
		stroke: 'orangered', strokeWidth: 2 })

    dots.push(dot)
	layer.add(dot)
}

stage.add(layer)
layer.draw()

function resize() {
    var size = Math.min(window.innerWidth, window.innerHeight)
	stage.size({ width: size, height: size })
	stage.scale({ x: size / 1000, y: size / 1000 })
	stage.draw()
}

resize()
window.addEventListener('resize', resize)

var anim = new Konva.Animation(function(frame) {
	var time = frame.time / beat_period
	var beat_id = Math.floor(time % beat_count)
	time -= Math.trunc(time)
	
	for (var i = 0; i < beat_count; i++) {
		if (beat_id == i) {
			dots[i].fill('orange')
		} else {
			dots[i].fill(back_color)
		}
	}
	
}, layer);

anim.start();

</script>
</body>
</html>